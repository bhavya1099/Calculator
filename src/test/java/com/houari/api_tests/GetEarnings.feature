# ********RoostGPT********

# Test generated by RoostGPT for test test-workflow using AI Type Azure Open AI and AI Model roostgpt-4-32k
# 
# ROOST_METHOD_HASH=0da3f3359d
# ROOST_METHOD_SIG_HASH=539e442fa0
# 
#  ########## Scenario ########## 
# 
# {
#   feature: 'Feature: Test API from Alphavantage.co',
#   background: null,
#   rule: null,
#   scenario: {
#     title: 'Scenario: Get Earnings',
#     steps: 'Given the Finnhub API base URL is "https://finnhub.io/api/v1"\n' +
#       'When I send a GET request to "/stock/earnings?symbol=AAPL"\n' +
#       'Then the response status code should be 200\n' +
#       'And the response should contain earnings data',
#     examples: ''
#   }
# }
# 

# ********RoostGPT********
Feature: Test API from Alphavantage.co

Background:
  * def finnhub_URL = karate.properties['FINNHUB_URL'] || 'http://localhost:4010'
  * def finnhub_AUTH_TOKEN = karate.properties['FINNHUB_AUTH_TOKEN'] || 'http://localhost:4010'
  * url finnhub_URL

@scenario_get_earnings
Scenario: Get Earnings

  # Setup request parameters
  Given def params = { symbol: 'AAPL', limit: 10, token: '#(finnhub_AUTH_TOKEN)' }
  And params params
  
  # GET /stock/earnings
  And path '/stock/earnings'
  When method get
  Then status 200

  #Verify response
  And match response contains { '[0].actual': '#number', '[0].estimate': '#number', '[0].surprise': '#number', '[0].surprisePercent': '#number', '[0].period': '#string', '[0].symbol': '#string', '[0].year': '#number', '[0].quarter': '#number' }
