# ********RoostGPT********

# Test generated by RoostGPT for test java-customannotation-test using AI Type  and AI Model 
# 
# Feature file generated for /kafka/v3/clusters/{cluster_id}/topics/{topic_name}_delete for http method type DELETE 
# RoostTestHash=b9526a5d59
# 
# 

# ********RoostGPT********
Feature: API Endpoint /kafka/v3/clusters/{cluster_id}/topics/{topic_name}

  Background:
    * def urlBase = karate.properties['UIOP_URL_BASE'] || karate.get('urlBase', 'http://localhost:4010')
    * url urlBase
    * configure headers = { Authorization: #(karate.properties['UIOP_AUTH_TOKEN']) }

  Scenario Outline: Delete a Kafka topic with a valid topic name and cluster ID
    Given path 'kafka/v3/clusters', <cluster_id>, 'topics', <topic_name>
    When method delete
    Then status 204

    Examples:
      | read('kafka_v3_clusters_cluster_id_topics_topic_name_delete.csv') |

  Scenario: Attempt to delete a Kafka topic with an invalid cluster ID results in 404
    Given path 'kafka/v3/clusters', 'invalid-cluster', 'topics', 'topic-1'
    When method delete
    Then status 404
    And match response ==
      """
      { 
        error_code: 404, 
        message: 'Cluster not found' 
      }
      """

  Scenario: Attempt to delete a Kafka topic with an invalid topic name results in 404
    Given path 'kafka/v3/clusters', 'cluster-1', 'topics', 'non-existing-topic'
    When method delete
    Then status 404
    And match response ==
      """
      { 
        error_code: 404, 
        message: 'requires-json-pointer(\'spec\')' 
      }
      """

  Scenario: Delete request with insufficient permissions results in 403
    Given path 'kafka/v3/clusters', 'cluster-1', 'topics', 'topic-1'
    When method delete
    Then status 403
    And match response ==
      """
      { 
        error_code: 40301, 
        message: 'Request is not authorized' 
      }
      """

  Scenario: Ensure proper response structure on Kafka topic deletion failure due to bad request
    Given path 'kafka/v3/clusters', 'cluster-1', 'topics', 'badformat'
    When method delete
    Then status 400
    And match response contains
      """
      { 
        error_code: 400, 
        message: 'Bad request format' 
      }
      """
