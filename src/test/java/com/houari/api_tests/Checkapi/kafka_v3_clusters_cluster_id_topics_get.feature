# ********RoostGPT********

# Test generated by RoostGPT for test java-customannotation-test using AI Type  and AI Model 
# 
# Feature file generated for /kafka/v3/clusters/{cluster_id}/topics_get for http method type GET 
# RoostTestHash=5a89adf6e3
# 
# 

# ********RoostGPT********
Feature: List Kafka Topics

  Background:
    * def urlBase = karate.properties['riot_URL_BASE'] || karate.get('urlBase', 'http://localhost:4010')
    * url urlBase
    * configure headers = { Authorization: '#(karate.properties['riot_AUTH_TOKEN'])' }

  Scenario Outline: Validate successful retrieval of Kafka topics for valid cluster ID
    Given path 'kafka/v3/clusters/', <cluster_id>, '/topics'
    When method get
    Then status 200
    And match response contains {'kind': 'KafkaTopicList'}
    And match each response.data[*].kind == 'KafkaTopic'
    And match each response.data[*].metadata.self contains <cluster_id>
    And match each response.data[*].is_internal == '#boolean'
    And match each response.data[*].replication_factor == '#number'
    And match each response.data[*].partitions_count == '#number'
    And match each response.data[*].cluster_id == <cluster_id>

    Examples:
      | cluster_id  |
      | 'cluster-1' |
      | 'cluster-2' |
      | 'cluster-3' |

  Scenario: Validate response code for unauthorized access
    Given path 'kafka/v3/clusters/', 'cluster-1', '/topics'
    When method get
    Then status 401
    And match response == """{ 
      "id": "#string", 
      "code": 40101, 
      "message": "Authentication failed" 
    }"""

  Scenario Outline: Validate response for bad request error due to wrong format
    Given path 'kafka/v3/clusters/', <cluster_id>, '/topics'
    When method get
    Then status 400
    And match response == """
      { 
        "error_code": "#number", 
        "message": "Cannot deserialize value..." 
      }
      """

    Examples:
      | cluster_id    |
      | 'non-integer' |

  Scenario: Validate server error handling
    Given path 'kafka/v3/clusters/', 'unstable-cluster', '/topics'
    When method get
    Then status 500
    And match response == """
      { 
        "id": "#string", 
        "error_code": "#number", 
        "message": "Internal Server Error" 
      }
      """
