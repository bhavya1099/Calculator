# ********RoostGPT********

# Test generated by RoostGPT for test java-customannotation-test using AI Type  and AI Model 
# 
# Feature file generated for /kafka/v3/clusters/{cluster_id}/topics/{topic_name}/partitions_get for http method type GET 
# RoostTestHash=4ee5afee1b
# 
# 

# ********RoostGPT********
Feature: List Kafka Partitions Endpoint

  Background:
    * def urlBase = karate.properties['riot_URL_BASE'] || karate.get('urlBase', 'http://localhost:4010')
    * url urlBase
    * configure headers = { Authorization: '#(karate.properties['riot_AUTH_TOKEN'])' }

  Scenario Outline: Testing GET /kafka/v3/clusters/{cluster_id}/topics/{topic_name}/partitions with valid parameters
    Given path 'kafka/v3/clusters/', <cluster_id>, '/topics/', <topic_name>, '/partitions'
    When method get
    Then status 200
    And match response == '#object'
    And match response.kind == '#string'
    And match response.metadata.self == '#string'
    And match response.data[*].kind == '#string'
    And match response.data[*].metadata.self == '#string'
    And match response.data[*].partition_id == '#number'
    And match response.data[*].cluster_id == '<cluster_id>'
    And match response.data[*].topic_name == '<topic_name>'

    Examples:
      | read('kafka_v3_clusters_cluster_id_topics_topic_name_partitions_get.csv') |

  Scenario Outline: Testing GET /kafka/v3/clusters/{cluster_id}/topics/{topic_name}/partitions with bad request
    Given path 'kafka/v3/clusters/', <cluster_id>, '/topics/', <topic_name>, '/partitions'
    When method get
    Then status 400
    And match response.code == '#number'
    And match response.message == '#string'

    Examples:
      | cluster_id      | topic_name |
      | invalid-cluster | topic-1    |
      | cluster-2       |            |

  Scenario Outline: Testing Unauthorized Access
    Given path 'kafka/v3/clusters/', <cluster_id>, '/topics/', <topic_name>, '/partitions'
    And header Authorization = 'InvalidToken'
    When method get
    Then status 401
    And match response.error_code == 40101

    Examples:
      | cluster_id | topic_name |
      | cluster-1  | topic-1    |
      | cluster-2  | topic-2    |

  Scenario: Test Not Found Error for non-existing cluster
    Given path 'kafka/v3/clusters/non-existing-cluster/topics/topic-1/partitions'
    When method get
    Then status 404
    And match response.code == 40403

  Scenario: Test Rate Limiting
    Given path 'kafka/v3/clusters/cluster-1/topics/topic-1/partitions'
    When method get
    Then status 429
    And match response contains 'Too Many Requests'
