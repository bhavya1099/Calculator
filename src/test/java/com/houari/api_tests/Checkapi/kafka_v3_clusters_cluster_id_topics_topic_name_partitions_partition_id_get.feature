# ********RoostGPT********

# Test generated by RoostGPT for test java-customannotation-test using AI Type  and AI Model 
# 
# Feature file generated for /kafka/v3/clusters/{cluster_id}/topics/{topic_name}/partitions/{partition_id}_get for http method type GET 
# RoostTestHash=0ecd20dc17
# 
# 

# ********RoostGPT********
Feature: Test GET Partitions Endpoint

  Background:
    * def urlBase = karate.properties['url.base'] || karate.get('urlBase', 'http://localhost:4010')
    * url urlBase
    * def authToken = karate.properties['AUTH_TOKEN']

  Scenario Outline: Verify the partition details for a valid cluster id, topic name, and partition id
    Given path 'kafka/v3/clusters/', <cluster_id>, '/topics/', <topic_name>, '/partitions/', <partition_id>
    And header Authorization = 'Bearer ' + authToken
    When method get
    Then status 200
    And match response == <expected_response>

    Examples:
      | read('kafka_v3_clusters_cluster_id_topics_topic_name_partitions_partition_id_get.csv') |

  Scenario Outline: Verify response for invalid Partition ID
    Given path 'kafka/v3/clusters/', <cluster_id>, '/topics/', <topic_name>, '/partitions/', <partition_id>
    And header Authorization = 'Bearer ' + authToken
    When method get
    Then status 404
    And match response == """{ "error_code": 40403, "message": "This server does not host this topic-partition." }"""

    Examples:
      | cluster_id  | topic_name | partition_id |
      | 'cluster-1' | 'topic-1'  |          999 |

  Scenario Outline: Verify response for missing Authorization header
    Given path 'kafka/v3/clusters/', <cluster_id>, '/topics/', <topic_name>, '/partitions/', <partition_id>
    When method get
    Then status 401
    And match response == """{ "error_code": 40101, "message": "Authentication failed" }"""

    Examples:
      | cluster_id  | topic_name | partition_id |
      | 'cluster-1' | 'topic-1'  |            0 |

  Scenario: Verify Authorization header uses token from environment
    Given path 'kafka/v3/clusters/cluster-1/topics/topic-1/partitions/0'
    And header Authorization = 'Bearer ' + authToken
    When method get
    Then status 200
