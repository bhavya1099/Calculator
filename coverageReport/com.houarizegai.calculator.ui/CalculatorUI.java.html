<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CalculatorUI.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Calculator</a> &gt; <a href="index.source.html" class="el_package">com.houarizegai.calculator.ui</a> &gt; <span class="el_source">CalculatorUI.java</span></div><h1>CalculatorUI.java</h1><pre class="source lang-java linenums">package com.houarizegai.calculator.ui;

import com.houarizegai.calculator.theme.properties.Theme;
import com.houarizegai.calculator.theme.ThemeLoader;

import java.awt.Cursor;
import java.awt.Font;
import java.awt.event.ItemEvent;
import java.util.Map;
import java.util.regex.Pattern;
import java.awt.Color;
import javax.swing.*;

import static com.houarizegai.calculator.util.ColorUtil.hex2Color;

public class CalculatorUI {

	private static final String FONT_NAME = &quot;Comic Sans MS&quot;;

	private static final String DOUBLE_OR_NUMBER_REGEX = &quot;([-]?\\d+[.]\\d*)|(\\d+)|(-\\d+)&quot;;

	private static final String APPLICATION_TITLE = &quot;Calculator&quot;;

	private static final int WINDOW_WIDTH = 410;

	private static final int WINDOW_HEIGHT = 600;

	private static final int BUTTON_WIDTH = 80;

	private static final int BUTTON_HEIGHT = 70;

	private static final int MARGIN_X = 20;

	private static final int MARGIN_Y = 60;

	private final JFrame window;

	private JComboBox&lt;String&gt; comboCalculatorType;

	private JComboBox&lt;String&gt; comboTheme;

	private JTextField inputScreen;

	private JButton btnC;

	private JButton btnBack;

	private JButton btnMod;

	private JButton btnDiv;

	private JButton btnMul;

	private JButton btnSub;

	private JButton btnAdd;

	private JButton btn0;

	private JButton btn1;

	private JButton btn2;

	private JButton btn3;

	private JButton btn4;

	private JButton btn5;

	private JButton btn6;

	private JButton btn7;

	private JButton btn8;

	private JButton btn9;

	private JButton btnPoint;

	private JButton btnEqual;

	private JButton btnRoot;

	private JButton btnPower;

	private JButton btnLog;

<span class="fc" id="L88">	private char selectedOperator = ' ';</span>

<span class="fc" id="L90">	private boolean go = true; // For calculate with Opt != (=)</span>

<span class="fc" id="L92">	private boolean addToDisplay = true; // Connect numbers in display</span>

<span class="fc" id="L94">	private double typedValue = 0;</span>

	private final Map&lt;String, Theme&gt; themesMap;

<span class="fc" id="L98">	public CalculatorUI() {</span>
<span class="fc" id="L99">		themesMap = ThemeLoader.loadThemes();</span>

<span class="fc" id="L101">		window = new JFrame(APPLICATION_TITLE);</span>
<span class="fc" id="L102">		window.setSize(WINDOW_WIDTH, WINDOW_HEIGHT);</span>
<span class="fc" id="L103">		window.setLocationRelativeTo(null);</span>

<span class="fc" id="L105">		int[] columns = { MARGIN_X, MARGIN_X + 90, MARGIN_X + 90 * 2, MARGIN_X + 90 * 3, MARGIN_X + 90 * 4 };</span>
<span class="fc" id="L106">		int[] rows = { MARGIN_Y, MARGIN_Y + 100, MARGIN_Y + 100 + 80, MARGIN_Y + 100 + 80 * 2, MARGIN_Y + 100 + 80 * 3,</span>
				MARGIN_Y + 100 + 80 * 4 };

<span class="fc" id="L109">		initInputScreen(columns, rows);</span>
<span class="fc" id="L110">		initButtons(columns, rows);</span>
<span class="fc" id="L111">		initCalculatorTypeSelector();</span>

<span class="fc" id="L113">		initThemeSelector();</span>

<span class="fc" id="L115">		window.setLayout(null);</span>
<span class="fc" id="L116">		window.setResizable(false);</span>
<span class="fc" id="L117">		window.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);</span>
<span class="fc" id="L118">		window.setVisible(true);</span>
<span class="fc" id="L119">	}</span>

	public double calculate(double firstNumber, double secondNumber, char operator) {
<span class="pc bpc" id="L122" title="1 of 7 branches missed.">		switch (operator) {</span>
			case '+':
<span class="fc" id="L124">				return firstNumber + secondNumber;</span>
			case '-':
<span class="fc" id="L126">				return firstNumber - secondNumber;</span>
			case '*':
<span class="fc" id="L128">				return firstNumber * secondNumber;</span>
			case '/':
<span class="fc" id="L130">				return firstNumber / secondNumber;</span>
			case '%':
<span class="fc" id="L132">				return firstNumber % secondNumber;</span>
			case '^':
<span class="fc" id="L134">				return Math.pow(firstNumber, secondNumber);</span>
			default:
<span class="nc" id="L136">				return secondNumber;</span>
		}
	}

	private void initThemeSelector() {
<span class="fc" id="L141">		comboTheme = createComboBox(themesMap.keySet().toArray(new String[0]), 230, 30, &quot;Theme&quot;);</span>
<span class="fc" id="L142">		comboTheme.addItemListener(event -&gt; {</span>
<span class="nc bnc" id="L143" title="All 2 branches missed.">			if (event.getStateChange() != ItemEvent.SELECTED)</span>
<span class="nc" id="L144">				return;</span>

<span class="nc" id="L146">			String selectedTheme = (String) event.getItem();</span>
<span class="nc" id="L147">			applyTheme(themesMap.get(selectedTheme));</span>
<span class="nc" id="L148">		});</span>

<span class="pc bpc" id="L150" title="1 of 2 branches missed.">		if (themesMap.entrySet().iterator().hasNext()) {</span>
<span class="fc" id="L151">			applyTheme(themesMap.entrySet().iterator().next().getValue());</span>
		}
<span class="fc" id="L153">	}</span>

	private void initInputScreen(int[] columns, int[] rows) {
<span class="fc" id="L156">		inputScreen = new JTextField(&quot;0&quot;);</span>
<span class="fc" id="L157">		inputScreen.setBounds(columns[0], rows[0], 350, 70);</span>
<span class="fc" id="L158">		inputScreen.setEditable(false);</span>
<span class="fc" id="L159">		inputScreen.setBackground(Color.WHITE);</span>
<span class="fc" id="L160">		inputScreen.setFont(new Font(FONT_NAME, Font.PLAIN, 33));</span>
<span class="fc" id="L161">		window.add(inputScreen);</span>
<span class="fc" id="L162">	}</span>

	private void initCalculatorTypeSelector() {
<span class="fc" id="L165">		comboCalculatorType = createComboBox(new String[] { &quot;Standard&quot;, &quot;Scientific&quot; }, 20, 30, &quot;Calculator type&quot;);</span>
<span class="fc" id="L166">		comboCalculatorType.addItemListener(event -&gt; {</span>
<span class="nc bnc" id="L167" title="All 2 branches missed.">			if (event.getStateChange() != ItemEvent.SELECTED)</span>
<span class="nc" id="L168">				return;</span>

<span class="nc" id="L170">			String selectedItem = (String) event.getItem();</span>
<span class="nc bnc" id="L171" title="All 3 branches missed.">			switch (selectedItem) {</span>
				case &quot;Standard&quot;:
<span class="nc" id="L173">					window.setSize(WINDOW_WIDTH, WINDOW_HEIGHT);</span>
<span class="nc" id="L174">					btnRoot.setVisible(false);</span>
<span class="nc" id="L175">					btnPower.setVisible(false);</span>
<span class="nc" id="L176">					btnLog.setVisible(false);</span>
<span class="nc" id="L177">					break;</span>
				case &quot;Scientific&quot;:
<span class="nc" id="L179">					window.setSize(WINDOW_WIDTH + 80, WINDOW_HEIGHT);</span>
<span class="nc" id="L180">					btnRoot.setVisible(true);</span>
<span class="nc" id="L181">					btnPower.setVisible(true);</span>
<span class="nc" id="L182">					btnLog.setVisible(true);</span>
					break;
			}
<span class="nc" id="L185">		});</span>
<span class="fc" id="L186">	}</span>

	private void initButtons(int[] columns, int[] rows) {
<span class="fc" id="L189">		btnC = createButton(&quot;C&quot;, columns[0], rows[1]);</span>
<span class="fc" id="L190">		btnC.addActionListener(event -&gt; {</span>
<span class="nc" id="L191">			inputScreen.setText(&quot;0&quot;);</span>
<span class="nc" id="L192">			selectedOperator = ' ';</span>
<span class="nc" id="L193">			typedValue = 0;</span>
<span class="nc" id="L194">		});</span>

<span class="fc" id="L196">		btnBack = createButton(&quot;&lt;-&quot;, columns[1], rows[1]);</span>
<span class="fc" id="L197">		btnBack.addActionListener(event -&gt; {</span>
<span class="nc" id="L198">			String str = inputScreen.getText();</span>
<span class="nc" id="L199">			StringBuilder str2 = new StringBuilder();</span>
<span class="nc bnc" id="L200" title="All 2 branches missed.">			for (int i = 0; i &lt; (str.length() - 1); i++) {</span>
<span class="nc" id="L201">				str2.append(str.charAt(i));</span>
			}
<span class="nc bnc" id="L203" title="All 2 branches missed.">			if (str2.toString().equals(&quot;&quot;)) {</span>
<span class="nc" id="L204">				inputScreen.setText(&quot;0&quot;);</span>
			}
			else {
<span class="nc" id="L207">				inputScreen.setText(str2.toString());</span>
			}
<span class="nc" id="L209">		});</span>

<span class="fc" id="L211">		btnMod = createButton(&quot;%&quot;, columns[2], rows[1]);</span>
<span class="fc" id="L212">		btnMod.addActionListener(event -&gt; {</span>
<span class="nc bnc" id="L213" title="All 4 branches missed.">			if (!Pattern.matches(DOUBLE_OR_NUMBER_REGEX, inputScreen.getText()) || !go)</span>
<span class="nc" id="L214">				return;</span>

<span class="nc" id="L216">			typedValue = calculate(typedValue, Double.parseDouble(inputScreen.getText()), selectedOperator);</span>
<span class="nc bnc" id="L217" title="All 2 branches missed.">			if (Pattern.matches(&quot;[-]?[\\d]+[.][0]*&quot;, String.valueOf(typedValue))) {</span>
<span class="nc" id="L218">				inputScreen.setText(String.valueOf((int) typedValue));</span>
			}
			else {
<span class="nc" id="L221">				inputScreen.setText(String.valueOf(typedValue));</span>
			}
<span class="nc" id="L223">			selectedOperator = '%';</span>
<span class="nc" id="L224">			go = false;</span>
<span class="nc" id="L225">			addToDisplay = false;</span>
<span class="nc" id="L226">		});</span>

<span class="fc" id="L228">		btnDiv = createButton(&quot;/&quot;, columns[3], rows[1]);</span>
<span class="fc" id="L229">		btnDiv.addActionListener(event -&gt; {</span>
<span class="nc bnc" id="L230" title="All 2 branches missed.">			if (!Pattern.matches(DOUBLE_OR_NUMBER_REGEX, inputScreen.getText()))</span>
<span class="nc" id="L231">				return;</span>

<span class="nc bnc" id="L233" title="All 2 branches missed.">			if (go) {</span>
<span class="nc" id="L234">				typedValue = calculate(typedValue, Double.parseDouble(inputScreen.getText()), selectedOperator);</span>
<span class="nc bnc" id="L235" title="All 2 branches missed.">				if (Pattern.matches(&quot;[-]?[\\d]+[.][0]*&quot;, String.valueOf(typedValue))) {</span>
<span class="nc" id="L236">					inputScreen.setText(String.valueOf((int) typedValue));</span>
				}
				else {
<span class="nc" id="L239">					inputScreen.setText(String.valueOf(typedValue));</span>
				}
<span class="nc" id="L241">				selectedOperator = '/';</span>
<span class="nc" id="L242">				go = false;</span>
<span class="nc" id="L243">				addToDisplay = false;</span>
			}
			else {
<span class="nc" id="L246">				selectedOperator = '/';</span>
			}
<span class="nc" id="L248">		});</span>

<span class="fc" id="L250">		btn7 = createButton(&quot;7&quot;, columns[0], rows[2]);</span>
<span class="fc" id="L251">		btn7.addActionListener(event -&gt; {</span>
<span class="nc bnc" id="L252" title="All 2 branches missed.">			if (addToDisplay) {</span>
<span class="nc bnc" id="L253" title="All 2 branches missed.">				if (Pattern.matches(&quot;[0]*&quot;, inputScreen.getText())) {</span>
<span class="nc" id="L254">					inputScreen.setText(&quot;7&quot;);</span>
				}
				else {
<span class="nc" id="L257">					inputScreen.setText(inputScreen.getText() + &quot;7&quot;);</span>
				}
			}
			else {
<span class="nc" id="L261">				inputScreen.setText(&quot;7&quot;);</span>
<span class="nc" id="L262">				addToDisplay = true;</span>
			}
<span class="nc" id="L264">			go = true;</span>
<span class="nc" id="L265">		});</span>

<span class="fc" id="L267">		btn8 = createButton(&quot;8&quot;, columns[1], rows[2]);</span>
<span class="fc" id="L268">		btn8.addActionListener(event -&gt; {</span>
<span class="nc bnc" id="L269" title="All 2 branches missed.">			if (addToDisplay) {</span>
<span class="nc bnc" id="L270" title="All 2 branches missed.">				if (Pattern.matches(&quot;[0]*&quot;, inputScreen.getText())) {</span>
<span class="nc" id="L271">					inputScreen.setText(&quot;8&quot;);</span>
				}
				else {
<span class="nc" id="L274">					inputScreen.setText(inputScreen.getText() + &quot;8&quot;);</span>
				}
			}
			else {
<span class="nc" id="L278">				inputScreen.setText(&quot;8&quot;);</span>
<span class="nc" id="L279">				addToDisplay = true;</span>
			}
<span class="nc" id="L281">			go = true;</span>
<span class="nc" id="L282">		});</span>

<span class="fc" id="L284">		btn9 = createButton(&quot;9&quot;, columns[2], rows[2]);</span>
<span class="fc" id="L285">		btn9.addActionListener(event -&gt; {</span>
<span class="nc bnc" id="L286" title="All 2 branches missed.">			if (addToDisplay) {</span>
<span class="nc bnc" id="L287" title="All 2 branches missed.">				if (Pattern.matches(&quot;[0]*&quot;, inputScreen.getText())) {</span>
<span class="nc" id="L288">					inputScreen.setText(&quot;9&quot;);</span>
				}
				else {
<span class="nc" id="L291">					inputScreen.setText(inputScreen.getText() + &quot;9&quot;);</span>
				}
			}
			else {
<span class="nc" id="L295">				inputScreen.setText(&quot;9&quot;);</span>
<span class="nc" id="L296">				addToDisplay = true;</span>
			}
<span class="nc" id="L298">			go = true;</span>
<span class="nc" id="L299">		});</span>

<span class="fc" id="L301">		btnMul = createButton(&quot;*&quot;, columns[3], rows[2]);</span>
<span class="fc" id="L302">		btnMul.addActionListener(event -&gt; {</span>
<span class="nc bnc" id="L303" title="All 2 branches missed.">			if (!Pattern.matches(DOUBLE_OR_NUMBER_REGEX, inputScreen.getText()))</span>
<span class="nc" id="L304">				return;</span>

<span class="nc bnc" id="L306" title="All 2 branches missed.">			if (go) {</span>
<span class="nc" id="L307">				typedValue = calculate(typedValue, Double.parseDouble(inputScreen.getText()), selectedOperator);</span>
<span class="nc bnc" id="L308" title="All 2 branches missed.">				if (Pattern.matches(&quot;[-]?[\\d]+[.][0]*&quot;, String.valueOf(typedValue))) {</span>
<span class="nc" id="L309">					inputScreen.setText(String.valueOf((int) typedValue));</span>
				}
				else {
<span class="nc" id="L312">					inputScreen.setText(String.valueOf(typedValue));</span>
				}
<span class="nc" id="L314">				selectedOperator = '*';</span>
<span class="nc" id="L315">				go = false;</span>
<span class="nc" id="L316">				addToDisplay = false;</span>
			}
			else {
<span class="nc" id="L319">				selectedOperator = '*';</span>
			}
<span class="nc" id="L321">		});</span>

<span class="fc" id="L323">		btn4 = createButton(&quot;4&quot;, columns[0], rows[3]);</span>
<span class="fc" id="L324">		btn4.addActionListener(event -&gt; {</span>
<span class="nc bnc" id="L325" title="All 2 branches missed.">			if (addToDisplay) {</span>
<span class="nc bnc" id="L326" title="All 2 branches missed.">				if (Pattern.matches(&quot;[0]*&quot;, inputScreen.getText())) {</span>
<span class="nc" id="L327">					inputScreen.setText(&quot;4&quot;);</span>
				}
				else {
<span class="nc" id="L330">					inputScreen.setText(inputScreen.getText() + &quot;4&quot;);</span>
				}
			}
			else {
<span class="nc" id="L334">				inputScreen.setText(&quot;4&quot;);</span>
<span class="nc" id="L335">				addToDisplay = true;</span>
			}
<span class="nc" id="L337">			go = true;</span>
<span class="nc" id="L338">		});</span>

<span class="fc" id="L340">		btn5 = createButton(&quot;5&quot;, columns[1], rows[3]);</span>
<span class="fc" id="L341">		btn5.addActionListener(event -&gt; {</span>
<span class="nc bnc" id="L342" title="All 2 branches missed.">			if (addToDisplay) {</span>
<span class="nc bnc" id="L343" title="All 2 branches missed.">				if (Pattern.matches(&quot;[0]*&quot;, inputScreen.getText())) {</span>
<span class="nc" id="L344">					inputScreen.setText(&quot;5&quot;);</span>
				}
				else {
<span class="nc" id="L347">					inputScreen.setText(inputScreen.getText() + &quot;5&quot;);</span>
				}
			}
			else {
<span class="nc" id="L351">				inputScreen.setText(&quot;5&quot;);</span>
<span class="nc" id="L352">				addToDisplay = true;</span>
			}
<span class="nc" id="L354">			go = true;</span>
<span class="nc" id="L355">		});</span>

<span class="fc" id="L357">		btn6 = createButton(&quot;6&quot;, columns[2], rows[3]);</span>
<span class="fc" id="L358">		btn6.addActionListener(event -&gt; {</span>
<span class="nc bnc" id="L359" title="All 2 branches missed.">			if (addToDisplay) {</span>
<span class="nc bnc" id="L360" title="All 2 branches missed.">				if (Pattern.matches(&quot;[0]*&quot;, inputScreen.getText())) {</span>
<span class="nc" id="L361">					inputScreen.setText(&quot;6&quot;);</span>
				}
				else {
<span class="nc" id="L364">					inputScreen.setText(inputScreen.getText() + &quot;6&quot;);</span>
				}
			}
			else {
<span class="nc" id="L368">				inputScreen.setText(&quot;6&quot;);</span>
<span class="nc" id="L369">				addToDisplay = true;</span>
			}
<span class="nc" id="L371">			go = true;</span>
<span class="nc" id="L372">		});</span>

<span class="fc" id="L374">		btnSub = createButton(&quot;-&quot;, columns[3], rows[3]);</span>
<span class="fc" id="L375">		btnSub.addActionListener(event -&gt; {</span>
<span class="nc bnc" id="L376" title="All 2 branches missed.">			if (!Pattern.matches(DOUBLE_OR_NUMBER_REGEX, inputScreen.getText()))</span>
<span class="nc" id="L377">				return;</span>

<span class="nc bnc" id="L379" title="All 2 branches missed.">			if (go) {</span>
<span class="nc" id="L380">				typedValue = calculate(typedValue, Double.parseDouble(inputScreen.getText()), selectedOperator);</span>
<span class="nc bnc" id="L381" title="All 2 branches missed.">				if (Pattern.matches(&quot;[-]?[\\d]+[.][0]*&quot;, String.valueOf(typedValue))) {</span>
<span class="nc" id="L382">					inputScreen.setText(String.valueOf((int) typedValue));</span>
				}
				else {
<span class="nc" id="L385">					inputScreen.setText(String.valueOf(typedValue));</span>
				}

<span class="nc" id="L388">				selectedOperator = '-';</span>
<span class="nc" id="L389">				go = false;</span>
<span class="nc" id="L390">				addToDisplay = false;</span>
			}
			else {
<span class="nc" id="L393">				selectedOperator = '-';</span>
			}
<span class="nc" id="L395">		});</span>

<span class="fc" id="L397">		btn1 = createButton(&quot;1&quot;, columns[0], rows[4]);</span>
<span class="fc" id="L398">		btn1.addActionListener(event -&gt; {</span>
<span class="nc bnc" id="L399" title="All 2 branches missed.">			if (addToDisplay) {</span>
<span class="nc bnc" id="L400" title="All 2 branches missed.">				if (Pattern.matches(&quot;[0]*&quot;, inputScreen.getText())) {</span>
<span class="nc" id="L401">					inputScreen.setText(&quot;1&quot;);</span>
				}
				else {
<span class="nc" id="L404">					inputScreen.setText(inputScreen.getText() + &quot;1&quot;);</span>
				}
			}
			else {
<span class="nc" id="L408">				inputScreen.setText(&quot;1&quot;);</span>
<span class="nc" id="L409">				addToDisplay = true;</span>
			}
<span class="nc" id="L411">			go = true;</span>
<span class="nc" id="L412">		});</span>

<span class="fc" id="L414">		btn2 = createButton(&quot;2&quot;, columns[1], rows[4]);</span>
<span class="fc" id="L415">		btn2.addActionListener(event -&gt; {</span>
<span class="nc bnc" id="L416" title="All 2 branches missed.">			if (addToDisplay) {</span>
<span class="nc bnc" id="L417" title="All 2 branches missed.">				if (Pattern.matches(&quot;[0]*&quot;, inputScreen.getText())) {</span>
<span class="nc" id="L418">					inputScreen.setText(&quot;2&quot;);</span>
				}
				else {
<span class="nc" id="L421">					inputScreen.setText(inputScreen.getText() + &quot;2&quot;);</span>
				}
			}
			else {
<span class="nc" id="L425">				inputScreen.setText(&quot;2&quot;);</span>
<span class="nc" id="L426">				addToDisplay = true;</span>
			}
<span class="nc" id="L428">			go = true;</span>
<span class="nc" id="L429">		});</span>

<span class="fc" id="L431">		btn3 = createButton(&quot;3&quot;, columns[2], rows[4]);</span>
<span class="fc" id="L432">		btn3.addActionListener(event -&gt; {</span>
<span class="nc bnc" id="L433" title="All 2 branches missed.">			if (addToDisplay) {</span>
<span class="nc bnc" id="L434" title="All 2 branches missed.">				if (Pattern.matches(&quot;[0]*&quot;, inputScreen.getText())) {</span>
<span class="nc" id="L435">					inputScreen.setText(&quot;3&quot;);</span>
				}
				else {
<span class="nc" id="L438">					inputScreen.setText(inputScreen.getText() + &quot;3&quot;);</span>
				}
			}
			else {
<span class="nc" id="L442">				inputScreen.setText(&quot;3&quot;);</span>
<span class="nc" id="L443">				addToDisplay = true;</span>
			}
<span class="nc" id="L445">			go = true;</span>
<span class="nc" id="L446">		});</span>

<span class="fc" id="L448">		btnAdd = createButton(&quot;+&quot;, columns[3], rows[4]);</span>
<span class="fc" id="L449">		btnAdd.addActionListener(event -&gt; {</span>
<span class="nc bnc" id="L450" title="All 2 branches missed.">			if (!Pattern.matches(DOUBLE_OR_NUMBER_REGEX, inputScreen.getText()))</span>
<span class="nc" id="L451">				return;</span>

<span class="nc bnc" id="L453" title="All 2 branches missed.">			if (go) {</span>
<span class="nc" id="L454">				typedValue = calculate(typedValue, Double.parseDouble(inputScreen.getText()), selectedOperator);</span>
<span class="nc bnc" id="L455" title="All 2 branches missed.">				if (Pattern.matches(&quot;[-]?[\\d]+[.][0]*&quot;, String.valueOf(typedValue))) {</span>
<span class="nc" id="L456">					inputScreen.setText(String.valueOf((int) typedValue));</span>
				}
				else {
<span class="nc" id="L459">					inputScreen.setText(String.valueOf(typedValue));</span>
				}
<span class="nc" id="L461">				selectedOperator = '+';</span>
<span class="nc" id="L462">				go = false;</span>
<span class="nc" id="L463">				addToDisplay = false;</span>
			}
			else {
<span class="nc" id="L466">				selectedOperator = '+';</span>
			}
<span class="nc" id="L468">		});</span>

<span class="fc" id="L470">		btnPoint = createButton(&quot;.&quot;, columns[0], rows[5]);</span>
<span class="fc" id="L471">		btnPoint.addActionListener(event -&gt; {</span>
<span class="nc bnc" id="L472" title="All 2 branches missed.">			if (addToDisplay) {</span>
<span class="nc bnc" id="L473" title="All 2 branches missed.">				if (!inputScreen.getText().contains(&quot;.&quot;)) {</span>
<span class="nc" id="L474">					inputScreen.setText(inputScreen.getText() + &quot;.&quot;);</span>
				}
			}
			else {
<span class="nc" id="L478">				inputScreen.setText(&quot;0.&quot;);</span>
<span class="nc" id="L479">				addToDisplay = true;</span>
			}
<span class="nc" id="L481">			go = true;</span>
<span class="nc" id="L482">		});</span>

<span class="fc" id="L484">		btn0 = createButton(&quot;0&quot;, columns[1], rows[5]);</span>
<span class="fc" id="L485">		btn0.addActionListener(event -&gt; {</span>
<span class="nc bnc" id="L486" title="All 2 branches missed.">			if (addToDisplay) {</span>
<span class="nc bnc" id="L487" title="All 2 branches missed.">				if (Pattern.matches(&quot;[0]*&quot;, inputScreen.getText())) {</span>
<span class="nc" id="L488">					inputScreen.setText(&quot;0&quot;);</span>
				}
				else {
<span class="nc" id="L491">					inputScreen.setText(inputScreen.getText() + &quot;0&quot;);</span>
				}
			}
			else {
<span class="nc" id="L495">				inputScreen.setText(&quot;0&quot;);</span>
<span class="nc" id="L496">				addToDisplay = true;</span>
			}
<span class="nc" id="L498">			go = true;</span>
<span class="nc" id="L499">		});</span>

<span class="fc" id="L501">		btnEqual = createButton(&quot;=&quot;, columns[2], rows[5]);</span>
<span class="fc" id="L502">		btnEqual.addActionListener(event -&gt; {</span>
<span class="nc bnc" id="L503" title="All 2 branches missed.">			if (!Pattern.matches(DOUBLE_OR_NUMBER_REGEX, inputScreen.getText()))</span>
<span class="nc" id="L504">				return;</span>

<span class="nc bnc" id="L506" title="All 2 branches missed.">			if (go) {</span>
<span class="nc" id="L507">				typedValue = calculate(typedValue, Double.parseDouble(inputScreen.getText()), selectedOperator);</span>
<span class="nc bnc" id="L508" title="All 2 branches missed.">				if (Pattern.matches(&quot;[-]?[\\d]+[.][0]*&quot;, String.valueOf(typedValue))) {</span>
<span class="nc" id="L509">					inputScreen.setText(String.valueOf((int) typedValue));</span>
				}
				else {
<span class="nc" id="L512">					inputScreen.setText(String.valueOf(typedValue));</span>
				}
<span class="nc" id="L514">				selectedOperator = '=';</span>
<span class="nc" id="L515">				addToDisplay = false;</span>
			}
<span class="nc" id="L517">		});</span>
<span class="fc" id="L518">		btnEqual.setSize(2 * BUTTON_WIDTH + 10, BUTTON_HEIGHT);</span>

<span class="fc" id="L520">		btnRoot = createButton(&quot;√&quot;, columns[4], rows[1]);</span>
<span class="fc" id="L521">		btnRoot.addActionListener(event -&gt; {</span>
<span class="nc bnc" id="L522" title="All 2 branches missed.">			if (!Pattern.matches(DOUBLE_OR_NUMBER_REGEX, inputScreen.getText()))</span>
<span class="nc" id="L523">				return;</span>

<span class="nc bnc" id="L525" title="All 2 branches missed.">			if (go) {</span>
<span class="nc" id="L526">				typedValue = Math.sqrt(Double.parseDouble(inputScreen.getText()));</span>
<span class="nc bnc" id="L527" title="All 2 branches missed.">				if (Pattern.matches(&quot;[-]?[\\d]+[.][0]*&quot;, String.valueOf(typedValue))) {</span>
<span class="nc" id="L528">					inputScreen.setText(String.valueOf((int) typedValue));</span>
				}
				else {
<span class="nc" id="L531">					inputScreen.setText(String.valueOf(typedValue));</span>
				}
<span class="nc" id="L533">				selectedOperator = '√';</span>
<span class="nc" id="L534">				addToDisplay = false;</span>
			}
<span class="nc" id="L536">		});</span>
<span class="fc" id="L537">		btnRoot.setVisible(false);</span>

<span class="fc" id="L539">		btnPower = createButton(&quot;pow&quot;, columns[4], rows[2]);</span>
<span class="fc" id="L540">		btnPower.addActionListener(event -&gt; {</span>
<span class="nc bnc" id="L541" title="All 2 branches missed.">			if (!Pattern.matches(DOUBLE_OR_NUMBER_REGEX, inputScreen.getText()))</span>
<span class="nc" id="L542">				return;</span>

<span class="nc bnc" id="L544" title="All 2 branches missed.">			if (go) {</span>
<span class="nc" id="L545">				typedValue = calculate(typedValue, Double.parseDouble(inputScreen.getText()), selectedOperator);</span>
<span class="nc bnc" id="L546" title="All 2 branches missed.">				if (Pattern.matches(&quot;[-]?[\\d]+[.][0]*&quot;, String.valueOf(typedValue))) {</span>
<span class="nc" id="L547">					inputScreen.setText(String.valueOf((int) typedValue));</span>
				}
				else {
<span class="nc" id="L550">					inputScreen.setText(String.valueOf(typedValue));</span>
				}
<span class="nc" id="L552">				selectedOperator = '^';</span>
<span class="nc" id="L553">				go = false;</span>
<span class="nc" id="L554">				addToDisplay = false;</span>
			}
			else {
<span class="nc" id="L557">				selectedOperator = '^';</span>
			}
<span class="nc" id="L559">		});</span>
<span class="fc" id="L560">		btnPower.setFont(new Font(&quot;Comic Sans MS&quot;, Font.PLAIN, 24));</span>
<span class="fc" id="L561">		btnPower.setVisible(false);</span>

<span class="fc" id="L563">		btnLog = createButton(&quot;ln&quot;, columns[4], rows[3]);</span>
<span class="fc" id="L564">		btnLog.addActionListener(event -&gt; {</span>
<span class="nc bnc" id="L565" title="All 2 branches missed.">			if (!Pattern.matches(DOUBLE_OR_NUMBER_REGEX, inputScreen.getText()))</span>
<span class="nc" id="L566">				return;</span>

<span class="nc bnc" id="L568" title="All 2 branches missed.">			if (go) {</span>
<span class="nc" id="L569">				typedValue = Math.log(Double.parseDouble(inputScreen.getText()));</span>
<span class="nc bnc" id="L570" title="All 2 branches missed.">				if (Pattern.matches(&quot;[-]?[\\d]+[.][0]*&quot;, String.valueOf(typedValue))) {</span>
<span class="nc" id="L571">					inputScreen.setText(String.valueOf((int) typedValue));</span>
				}
				else {
<span class="nc" id="L574">					inputScreen.setText(String.valueOf(typedValue));</span>
				}
<span class="nc" id="L576">				selectedOperator = 'l';</span>
<span class="nc" id="L577">				addToDisplay = false;</span>
			}
<span class="nc" id="L579">		});</span>
<span class="fc" id="L580">		btnLog.setVisible(false);</span>
<span class="fc" id="L581">	}</span>

	private JComboBox&lt;String&gt; createComboBox(String[] items, int x, int y, String toolTip) {
<span class="fc" id="L584">		JComboBox&lt;String&gt; combo = new JComboBox&lt;&gt;(items);</span>
<span class="fc" id="L585">		combo.setBounds(x, y, 140, 25);</span>
<span class="fc" id="L586">		combo.setToolTipText(toolTip);</span>
<span class="fc" id="L587">		combo.setCursor(new Cursor(Cursor.HAND_CURSOR));</span>
<span class="fc" id="L588">		window.add(combo);</span>

<span class="fc" id="L590">		return combo;</span>
	}

	private JButton createButton(String label, int x, int y) {
<span class="fc" id="L594">		JButton btn = new JButton(label);</span>
<span class="fc" id="L595">		btn.setBounds(x, y, BUTTON_WIDTH, BUTTON_HEIGHT);</span>
<span class="fc" id="L596">		btn.setFont(new Font(&quot;Comic Sans MS&quot;, Font.PLAIN, 28));</span>
<span class="fc" id="L597">		btn.setCursor(new Cursor(Cursor.HAND_CURSOR));</span>
<span class="fc" id="L598">		btn.setFocusable(false);</span>
<span class="fc" id="L599">		window.add(btn);</span>

<span class="fc" id="L601">		return btn;</span>
	}

	private void applyTheme(Theme theme) {
<span class="fc" id="L605">		window.getContentPane().setBackground(hex2Color(theme.getApplicationBackground()));</span>

<span class="fc" id="L607">		comboCalculatorType.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L608">		comboTheme.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L609">		inputScreen.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L610">		btn0.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L611">		btn1.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L612">		btn2.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L613">		btn3.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L614">		btn4.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L615">		btn5.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L616">		btn6.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L617">		btn7.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L618">		btn8.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L619">		btn9.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L620">		btnPoint.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L621">		btnC.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L622">		btnBack.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L623">		btnMod.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L624">		btnDiv.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L625">		btnMul.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L626">		btnSub.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L627">		btnAdd.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L628">		btnRoot.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L629">		btnLog.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L630">		btnPower.setForeground(hex2Color(theme.getTextColor()));</span>
<span class="fc" id="L631">		btnEqual.setForeground(hex2Color(theme.getBtnEqualTextColor()));</span>

<span class="fc" id="L633">		comboCalculatorType.setBackground(hex2Color(theme.getApplicationBackground()));</span>
<span class="fc" id="L634">		comboTheme.setBackground(hex2Color(theme.getApplicationBackground()));</span>
<span class="fc" id="L635">		inputScreen.setBackground(hex2Color(theme.getApplicationBackground()));</span>
<span class="fc" id="L636">		btn0.setBackground(hex2Color(theme.getNumbersBackground()));</span>
<span class="fc" id="L637">		btn1.setBackground(hex2Color(theme.getNumbersBackground()));</span>
<span class="fc" id="L638">		btn2.setBackground(hex2Color(theme.getNumbersBackground()));</span>
<span class="fc" id="L639">		btn3.setBackground(hex2Color(theme.getNumbersBackground()));</span>
<span class="fc" id="L640">		btn4.setBackground(hex2Color(theme.getNumbersBackground()));</span>
<span class="fc" id="L641">		btn5.setBackground(hex2Color(theme.getNumbersBackground()));</span>
<span class="fc" id="L642">		btn6.setBackground(hex2Color(theme.getNumbersBackground()));</span>
<span class="fc" id="L643">		btn7.setBackground(hex2Color(theme.getNumbersBackground()));</span>
<span class="fc" id="L644">		btn8.setBackground(hex2Color(theme.getNumbersBackground()));</span>
<span class="fc" id="L645">		btn9.setBackground(hex2Color(theme.getNumbersBackground()));</span>
<span class="fc" id="L646">		btnPoint.setBackground(hex2Color(theme.getNumbersBackground()));</span>
<span class="fc" id="L647">		btnC.setBackground(hex2Color(theme.getOperatorBackground()));</span>
<span class="fc" id="L648">		btnBack.setBackground(hex2Color(theme.getOperatorBackground()));</span>
<span class="fc" id="L649">		btnMod.setBackground(hex2Color(theme.getOperatorBackground()));</span>
<span class="fc" id="L650">		btnDiv.setBackground(hex2Color(theme.getOperatorBackground()));</span>
<span class="fc" id="L651">		btnMul.setBackground(hex2Color(theme.getOperatorBackground()));</span>
<span class="fc" id="L652">		btnSub.setBackground(hex2Color(theme.getOperatorBackground()));</span>
<span class="fc" id="L653">		btnAdd.setBackground(hex2Color(theme.getOperatorBackground()));</span>
<span class="fc" id="L654">		btnRoot.setBackground(hex2Color(theme.getOperatorBackground()));</span>
<span class="fc" id="L655">		btnLog.setBackground(hex2Color(theme.getOperatorBackground()));</span>
<span class="fc" id="L656">		btnPower.setBackground(hex2Color(theme.getOperatorBackground()));</span>
<span class="fc" id="L657">		btnEqual.setBackground(hex2Color(theme.getBtnEqualBackground()));</span>
<span class="fc" id="L658">	}</span>

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.7.202105040129</span></div></body></html>